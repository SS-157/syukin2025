<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‡ºå‹¤ç°¿ - å‹¤æ€ ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap');
        body {
            font-family: 'Noto Sans JP', sans-serif;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-shadow {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .status-present {
            background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%);
        }
        .status-absent {
            background: linear-gradient(135deg, #f87171 0%, #ef4444 100%);
        }
        .status-late {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
        }
        .hover-scale {
            transition: transform 0.2s ease;
        }
        .hover-scale:hover {
            transform: scale(1.02);
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="gradient-bg text-white py-6 px-4">
        <div class="max-w-6xl mx-auto">
            <h1 class="text-3xl font-bold text-center mb-2">ğŸ“‹ å‡ºå‹¤ç°¿</h1>
            <p class="text-center text-blue-100">å‹¤æ€ ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </p>
        </div>
    </header>

    <div class="max-w-6xl mx-auto p-6">
        <!-- Date and Summary Section -->
        <div class="grid md:grid-cols-3 gap-6 mb-8">
            <div class="bg-white rounded-xl p-6 card-shadow">
                <h3 class="text-lg font-semibold text-gray-800 mb-2">ğŸ“… ä»Šæ—¥ã®æ—¥ä»˜</h3>
                <p class="text-2xl font-bold text-blue-600" id="currentDate"></p>
            </div>
            <div class="bg-white rounded-xl p-6 card-shadow">
                <h3 class="text-lg font-semibold text-gray-800 mb-2">ğŸ‘¥ å‡ºå‹¤è€…æ•°</h3>
                <p class="text-2xl font-bold text-green-600" id="presentCount">0</p>
            </div>
            <div class="bg-white rounded-xl p-6 card-shadow">
                <h3 class="text-lg font-semibold text-gray-800 mb-2">ğŸ“Š å‡ºå‹¤ç‡</h3>
                <p class="text-2xl font-bold text-purple-600" id="attendanceRate">0%</p>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="bg-white rounded-xl p-6 card-shadow mb-8">
            <h3 class="text-xl font-semibold text-gray-800 mb-4">âš¡ ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</h3>
            <div class="flex flex-wrap gap-4">
                <button onclick="addEmployee()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium hover-scale">
                    â• å¾“æ¥­å“¡è¿½åŠ 
                </button>
                <button onclick="markAllPresent()" class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium hover-scale">
                    âœ… å…¨å“¡å‡ºå‹¤
                </button>
                <button onclick="exportData()" class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-medium hover-scale">
                    ğŸ“¤ ãƒ‡ãƒ¼ã‚¿å‡ºåŠ›
                </button>
            </div>
        </div>

        <!-- Employee List -->
        <div class="bg-white rounded-xl p-6 card-shadow">
            <h3 class="text-xl font-semibold text-gray-800 mb-6">ğŸ‘¨â€ğŸ’¼ å¾“æ¥­å“¡å‡ºå‹¤çŠ¶æ³</h3>
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead>
                        <tr class="border-b-2 border-gray-200">
                            <th class="text-left py-3 px-4 font-semibold text-gray-700">å¾“æ¥­å“¡å</th>
                            <th class="text-left py-3 px-4 font-semibold text-gray-700">éƒ¨ç½²</th>
                            <th class="text-left py-3 px-4 font-semibold text-gray-700">å‡ºå‹¤æ™‚åˆ»</th>
                            <th class="text-left py-3 px-4 font-semibold text-gray-700">é€€å‹¤æ™‚åˆ»</th>
                            <th class="text-left py-3 px-4 font-semibold text-gray-700">çŠ¶æ…‹</th>
                            <th class="text-left py-3 px-4 font-semibold text-gray-700">ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</th>
                        </tr>
                    </thead>
                    <tbody id="employeeList">
                        <!-- Employee rows will be inserted here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Add Employee Modal -->
    <div id="addEmployeeModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl p-8 max-w-md w-full mx-4">
            <h3 class="text-xl font-semibold text-gray-800 mb-6">æ–°ã—ã„å¾“æ¥­å“¡ã‚’è¿½åŠ </h3>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">å¾“æ¥­å“¡å</label>
                    <input type="text" id="employeeName" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="å±±ç”°å¤ªéƒ">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">éƒ¨ç½²</label>
                    <select id="employeeDepartment" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="å–¶æ¥­éƒ¨">å–¶æ¥­éƒ¨</option>
                        <option value="é–‹ç™ºéƒ¨">é–‹ç™ºéƒ¨</option>
                        <option value="äººäº‹éƒ¨">äººäº‹éƒ¨</option>
                        <option value="çµŒç†éƒ¨">çµŒç†éƒ¨</option>
                        <option value="ç·å‹™éƒ¨">ç·å‹™éƒ¨</option>
                    </select>
                </div>
            </div>
            <div class="flex gap-4 mt-6">
                <button onclick="saveEmployee()" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-medium">
                    ä¿å­˜
                </button>
                <button onclick="closeModal()" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-lg font-medium">
                    ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                </button>
            </div>
        </div>
    </div>

    <script>
        let employees = [
            { id: 1, name: 'ç”°ä¸­èŠ±å­', department: 'å–¶æ¥­éƒ¨', status: 'present', checkIn: '09:00', checkOut: '' },
            { id: 2, name: 'ä½è—¤æ¬¡éƒ', department: 'é–‹ç™ºéƒ¨', status: 'present', checkIn: '08:45', checkOut: '' },
            { id: 3, name: 'éˆ´æœ¨ä¸‰éƒ', department: 'äººäº‹éƒ¨', status: 'late', checkIn: '09:30', checkOut: '' },
            { id: 4, name: 'é«˜æ©‹å››éƒ', department: 'çµŒç†éƒ¨', status: 'absent', checkIn: '', checkOut: '' },
            { id: 5, name: 'ä¼Šè—¤äº”éƒ', department: 'ç·å‹™éƒ¨', status: 'present', checkIn: '08:50', checkOut: '' }
        ];

        function updateCurrentDate() {
            const now = new Date();
            const options = { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric', 
                weekday: 'long' 
            };
            document.getElementById('currentDate').textContent = now.toLocaleDateString('ja-JP', options);
        }

        function updateSummary() {
            const presentCount = employees.filter(emp => emp.status === 'present' || emp.status === 'late').length;
            const totalCount = employees.length;
            const attendanceRate = totalCount > 0 ? Math.round((presentCount / totalCount) * 100) : 0;

            document.getElementById('presentCount').textContent = presentCount;
            document.getElementById('attendanceRate').textContent = attendanceRate + '%';
        }

        function getStatusBadge(status) {
            const badges = {
                'present': '<span class="status-present text-white px-3 py-1 rounded-full text-sm font-medium">âœ… å‡ºå‹¤</span>',
                'absent': '<span class="status-absent text-white px-3 py-1 rounded-full text-sm font-medium">âŒ æ¬ å‹¤</span>',
                'late': '<span class="status-late text-white px-3 py-1 rounded-full text-sm font-medium">â° é…åˆ»</span>'
            };
            return badges[status] || badges['absent'];
        }

        function renderEmployees() {
            const tbody = document.getElementById('employeeList');
            tbody.innerHTML = employees.map(emp => `
                <tr class="border-b border-gray-100 hover:bg-gray-50">
                    <td class="py-4 px-4 font-medium text-gray-900">${emp.name}</td>
                    <td class="py-4 px-4 text-gray-600">${emp.department}</td>
                    <td class="py-4 px-4 text-gray-600">${emp.checkIn || '-'}</td>
                    <td class="py-4 px-4 text-gray-600">${emp.checkOut || '-'}</td>
                    <td class="py-4 px-4">${getStatusBadge(emp.status)}</td>
                    <td class="py-4 px-4">
                        <div class="flex gap-2">
                            <button onclick="toggleStatus(${emp.id})" class="bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded text-sm font-medium">
                                çŠ¶æ…‹å¤‰æ›´
                            </button>
                            <button onclick="checkOut(${emp.id})" class="bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded text-sm font-medium">
                                é€€å‹¤
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
            updateSummary();
        }

        function toggleStatus(id) {
            const employee = employees.find(emp => emp.id === id);
            if (employee) {
                const statuses = ['present', 'absent', 'late'];
                const currentIndex = statuses.indexOf(employee.status);
                employee.status = statuses[(currentIndex + 1) % statuses.length];
                
                if (employee.status === 'present' && !employee.checkIn) {
                    employee.checkIn = new Date().toLocaleTimeString('ja-JP', { hour: '2-digit', minute: '2-digit' });
                } else if (employee.status === 'absent') {
                    employee.checkIn = '';
                    employee.checkOut = '';
                }
                
                renderEmployees();
            }
        }

        function checkOut(id) {
            const employee = employees.find(emp => emp.id === id);
            if (employee && (employee.status === 'present' || employee.status === 'late')) {
                employee.checkOut = new Date().toLocaleTimeString('ja-JP', { hour: '2-digit', minute: '2-digit' });
                renderEmployees();
            }
        }

        function addEmployee() {
            document.getElementById('addEmployeeModal').classList.remove('hidden');
            document.getElementById('addEmployeeModal').classList.add('flex');
        }

        function closeModal() {
            document.getElementById('addEmployeeModal').classList.add('hidden');
            document.getElementById('addEmployeeModal').classList.remove('flex');
            document.getElementById('employeeName').value = '';
            document.getElementById('employeeDepartment').value = 'å–¶æ¥­éƒ¨';
        }

        function saveEmployee() {
            const name = document.getElementById('employeeName').value.trim();
            const department = document.getElementById('employeeDepartment').value;
            
            if (name) {
                const newEmployee = {
                    id: Math.max(...employees.map(emp => emp.id)) + 1,
                    name: name,
                    department: department,
                    status: 'absent',
                    checkIn: '',
                    checkOut: ''
                };
                employees.push(newEmployee);
                renderEmployees();
                closeModal();
            }
        }

        function markAllPresent() {
            employees.forEach(emp => {
                if (emp.status === 'absent') {
                    emp.status = 'present';
                    emp.checkIn = new Date().toLocaleTimeString('ja-JP', { hour: '2-digit', minute: '2-digit' });
                }
            });
            renderEmployees();
        }

        function exportData() {
            const data = employees.map(emp => ({
                åå‰: emp.name,
                éƒ¨ç½²: emp.department,
                çŠ¶æ…‹: emp.status === 'present' ? 'å‡ºå‹¤' : emp.status === 'late' ? 'é…åˆ»' : 'æ¬ å‹¤',
                å‡ºå‹¤æ™‚åˆ»: emp.checkIn || '-',
                é€€å‹¤æ™‚åˆ»: emp.checkOut || '-'
            }));
            
            const csvContent = "data:text/csv;charset=utf-8," 
                + Object.keys(data[0]).join(',') + '\n'
                + data.map(row => Object.values(row).join(',')).join('\n');
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", `å‡ºå‹¤ç°¿_${new Date().toISOString().split('T')[0]}.csv`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Initialize the app
        updateCurrentDate();
        renderEmployees();
        
        // Update time every minute
        setInterval(updateCurrentDate, 60000);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97a33b95a1cbd48e',t:'MTc1NzA0OTE1OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
